function deleteNote(){}function saveNote(){}function writeMobile(a,b){var c=$("<div />",{"class":"note",id:a.id});c.css({backgroundColor:a.color,margin:"auto",color:"black",top:45,left:offleft+5});var d=$("<div />",{"class":"noteHeader"});var e=$("<div />");e.bind("blur",function(a){closeSave(a,$(this));$(this).attr({contenteditable:false})});e.bind("keypress",function(a){if(a.keyCode==13){a.preventDefault();a.stopPropagation();return}});e.bind("click",function(a){a.preventDefault();if(!online){return}e.attr({contenteditable:true});e.focus();$(document).bind("click",function(a){if(isEditable(a.target)){return}a.stopPropagation();e.blur();$(document).unbind("click")})});e.html(a.subject);var f=$("<div />",{"class":"options"});f.bind("click",function(a){unToggle();a.preventDefault();a.stopPropagation();dropDown(c)});c.append(f);f.css({display:"inline"});d.append(e);c.append(d);c.append($("<hr/>"));var g=$("<div />",{"class":"noteContent"});var h=$("<blockquote />");h.bind("blur",function(a){closeSave(a,h);h.attr({contenteditable:false})});h.bind("click",function(a){if(!online){return}h.attr({contenteditable:true});h.focus();$(document).bind("click",function(a){if(isEditable(a.target)){return}a.stopPropagation();h.attr({contenteditable:false});$(document).unbind("click");closeSave(a,h)})});h.html(a.content);g.append(h);c.append(g);c.css({display:"none"});b.append(c);c.fadeIn(350)}function writeNote(a){if(!compare(a)){a.x=offleft;a.y=offset;a.z=mobZ++}var b=$("<div />",{"class":"note",id:"tmp_"+a.id});b.css({left:a.x,top:a.y,zIndex:a.z,backgroundColor:a.color});offset+=35;b.bind("click",function(b){b.preventDefault();startDrag(b,a)});var c=$("<div />",{"class":"noteHeader"});var d=$("<div />");d.html(a.subject);c.append(d);b.append(c);b.append($("<hr/>"));var e=$("<div />",{"class":"noteContent"});var f=$("<blockquote />");f.html(a.content);e.append(f);b.append(e);$("#tmp_"+a.id).remove();$("#noteArea").append(b)}function compare(a){var b=notes[a.id];if(b===undefined||b===null){return false}var c={left:b.x,top:b.y};if(c.left===offleft){if((c.top-45)%35===0){a.x=b.x;a.y=b.y;a.z=b.z;return true}}return false}function getNotes(){$.ajax({url:"/notes",async:true,type:"GET",dataType:"json",success:function(a){var b={};$.each(a,function(c){writeNote(a[c],false);delete notes[a[c].id];b[a[c].id]=a[c]});for(var c in notes){if(notes.hasOwnProperty(c)){$("#"+notes[c].id).remove()}}notes=b;dumpNotes()}})}function startDrag(a,b){var c=$("<div />",{"class":"overlay"});$("body").append(c);c.fadeIn("fast");c.bind("click",function(a){if(a.currentTarget==a.target){if(!!notes[b.id]){writeNote(b)}else{$("#tmp_"+b.id).remove()}c.fadeOut("fast",function(){c.remove()})}});writeMobile(b,c)}"use strict";var offset=45;var mobZ=0;var offleft=37